const e={},g="field";function h(r){let{canvas:a,frame:i,analyser:o,frequencyData:t}=r;i++,o.getByteFrequencyData(t),a.width=window.innerWidth,a.height=window.innerHeight;const c=Math.sqrt(t.length);e.parent.rotation.x+=.001,e.parent.rotation.y+=.002,e.parent.rotation.z-=.003;for(let n=0;n<t.length;n++){const d=e.cubes[n],l=Math.floor(n/c),f=n*e.cubeSize,b=l*(e.cubeSize*c),s=e.cubeSize*32/2;d.position.x=f-b-s,d.position.y=l-s;const u=t[n]/255,w=Math.sin((i+n)/(e.initialThin+u*e.dataMulti))/e.outerThin;d.position.z=w*(u*e.zMulti)}requestAnimationFrame(h.bind(this,r)),e.renderer.render(e.scene,e.camera)}function z(r){let{frequencyData:a}=r;e.scene=new THREE.Scene,e.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),e.renderer=new THREE.WebGLRenderer,e.renderer.setPixelRatio(window.devicePixelRatio),e.renderer.setSize(window.innerWidth,window.innerHeight),e.renderer.setClearColor(16777215,1),document.body.appendChild(e.renderer.domElement),e.parent=new THREE.Object3D,e.scene.add(e.parent),e.cubes=[],e.cubeSize=1,e.realCubeSizeModifier=.5,e.realCubeSize=e.cubeSize*e.realCubeSizeModifier,e.cubeGeo=new THREE.BoxGeometry(e.realCubeSize,e.realCubeSize,e.realCubeSize);for(let i=0;i<a.length;i++){const o=new THREE.MeshPhongMaterial({color:1118481}),t=new THREE.Mesh(e.cubeGeo,o);e.cubes[i]=t,e.parent.add(e.cubes[i])}e.camera.position.z=40,e.light=new THREE.AmbientLight(16777215),e.light.position.z=2,e.scene.add(e.light),e.initialThin=10,e.outerThin=50,e.dataMulti=0,e.zMulti=1e3,e.gui=new dat.GUI,e.gui.add(e,"initialThin",0,100),e.gui.add(e,"outerThin",0,100),e.gui.add(e,"dataMulti",-1.5,1.5),e.gui.add(e,"zMulti",-2e3,2e3),h(r)}export{z as initialFunction,h as loopingFunction,g as name};
